<!DOCTYPE html>
<html lang="id" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SchoolHub ‚Äî Portal Terpadu Sekolah</title>
  <meta name="description" content="Semua web app sekolah dalam satu halaman ‚Äî cepat, rapi, mudah dicari." />
  <meta name="theme-color" content="#0ea5e9" />
  <meta name="color-scheme" content="light dark" />
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='46' fill='%230ea5e9'/%3E%3Ctext x='50' y='60' font-size='48' text-anchor='middle' fill='white' font-family='ui-sans-serif,system-ui' %3ES%3C/text%3E%3C/svg%3E" />
  <style>
    :root {
      --bg: #0b1020;         /* dark base, we'll invert for light */
      --card: #111827;
      --text: #e5e7eb;
      --muted: #94a3b8;
      --accent: #0ea5e9;
      --ring: rgba(14,165,233,.5);
      --border: #1f2937;
      color-scheme: dark;
    }
    [data-theme="light"]{
      --bg: #f8fafc;
      --card: #ffffff;
      --text: #0f172a;
      --muted: #64748b;
      --accent: #0ea5e9;
      --ring: rgba(14,165,233,.35);
      --border: #e2e8f0;
      color-scheme: light;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--text);font-family:ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial}
    a{color:inherit;text-decoration:none}
    .wrap{max-width:1100px;margin:0 auto;padding:10px}
    @media (min-width:640px){.wrap{padding:20px}}
    header{display:flex;gap:12px;align-items:center;justify-content:space-between;position:sticky;top:0;background:var(--bg);z-index:10;padding-bottom:6px;border-bottom:1px solid var(--border);flex-wrap:wrap;row-gap:8px}
    .brand{display:flex;align-items:center;gap:10px;min-width:0}
    .logo{width:34px;height:34px;border-radius:10px;background:var(--accent);display:grid;place-items:center;overflow:hidden}
    .logo-img{width:100%;height:100%;object-fit:cover;display:block;border-radius:inherit}
    .title{font-weight:800;letter-spacing:.2px;font-size:1.35rem;margin-bottom:2px}
    .school{color:var(--muted);font-size:13.5px;font-weight:600}
    .actions{display:flex;gap:8px;align-items:center}
    .btn{border:1px solid var(--border);background:var(--card);color:var(--text);padding:8px 12px;border-radius:12px;display:inline-flex;gap:8px;align-items:center;cursor:pointer;font-size:15px;min-height:38px}
    .btn span{font-size:15px;white-space:nowrap}
    .btn:hover{border-color:var(--accent)}
    .btn[aria-pressed="true"]{border-color:var(--accent);outline:none}
    .btn:focus-visible{outline:2px solid var(--accent);outline-offset:2px}
    .toolbar{display:grid;gap:8px;margin-top:10px}
    @media (min-width:640px){.toolbar{grid-template-columns:1fr auto}}
    .search{display:flex;align-items:center;gap:6px;border:1px solid var(--border);background:var(--card);padding:7px 10px;border-radius:10px;min-height:40px}
    .search input{flex:1;border:none;outline:none;background:transparent;color:var(--text);font-size:15px}
    .search input::placeholder{color:var(--muted);opacity:.9}
    .search input::-webkit-input-placeholder{color:var(--muted)}
    .chips{display:flex;gap:8px;flex-wrap:wrap}
    .chip{padding:7px 14px;border-radius:999px;border:1.2px solid var(--border);background:var(--card);font-size:14px;cursor:pointer;line-height:1.1;transition:background .09s,border .09s;font-weight:500}
    .chip[aria-pressed="true"], .chip:focus-visible{border-color:var(--accent);background:rgba(14,165,233,.06)}

    .section{margin-top:18px}
    .section h2{font-size:14px;text-transform:uppercase;letter-spacing:.2em;color:var(--muted);margin:22px 2px 10px}

    .grid{display:grid;grid-template-columns:repeat(1,minmax(0,1fr));gap:12px}
    @media (min-width:640px){.grid{grid-template-columns:repeat(2,minmax(0,1fr))}}
    @media (min-width:940px){.grid{grid-template-columns:repeat(3,minmax(0,1fr))}}

    .card{position:relative;border:1px solid var(--border);background:var(--card);border-radius:16px;padding:14px;display:flex;gap:12px;align-items:flex-start;transition:border-color .1s ease, background-color .1s ease}
    .card:hover{border-color:var(--accent);background:rgba(14,165,233,.05)}
    .icon{width:40px;height:40px;border-radius:12px;display:grid;place-items:center;background:var(--card);border:1px solid var(--border);color:var(--text)}
    .meta{flex:1;min-width:0}
    .meta h3{margin:0 0 6px;font-size:16px;display:flex;align-items:center;gap:8px}
    .desc{color:var(--muted);font-size:13px;line-height:1.4}
    .tags{margin-top:10px;display:flex;gap:6px;flex-wrap:wrap}
    .tag{font-size:11px;padding:4px 8px;border:1px dashed var(--border);border-radius:999px;color:var(--muted)}
    .status{position:absolute;top:12px;right:12px;font-size:11px;border:1px solid var(--border);padding:4px 8px;border-radius:999px;color:var(--muted);background:rgba(2,6,23,.04)}
    .fav{position:absolute;bottom:12px;right:12px;background:transparent;border:none;color:var(--muted);cursor:pointer}
    .fav[aria-pressed="true"]{color:var(--accent)}

    .empty{border:1px dashed var(--border);border-radius:16px;padding:20px;text-align:center;color:var(--muted)}
    footer{margin:28px 2px 8px;color:var(--muted);font-size:13px;display:flex;justify-content:space-between;gap:10px;flex-wrap:wrap}
    .kbd{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;border:1px solid var(--border);border-bottom-width:3px;padding:2px 6px;border-radius:6px}
    @media (prefers-reduced-motion: reduce){
      *{animation-duration:0.001ms!important;animation-iteration-count:1!important;transition-duration:0.001ms!important;scroll-behavior:auto!important}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand" role="banner">
        <div class="logo" aria-label="Logo Sekolah">
          <img class="logo-img" src="./logo.png" alt="Logo Sekolah" onerror="this.style.display='none'">
        </div>
        <div>
          <div class="title">SchoolHub</div>
          <div class="school">SMP PGII 1 Bandung</div>
          <div style="color:var(--muted);font-size:13px">Portal Terpadu Sekolah ‚Äî semua aplikasi dalam satu klik</div>
        </div>
      </div>
      <div class="actions" role="toolbar" aria-label="Aksi">
        <button class="btn" id="themeBtn" aria-pressed="false" title="Ganti tema (T)">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true"><path d="M12 3c.132 0 .263.003.393.01A9 9 0 1 0 21 12.607 7 7 0 0 1 12 3Z" stroke-width="1.5"/></svg>
          <span class="hide-sm">Tema</span>
        </button>
        <a class="btn" href="https://wa.me/6285862982928" target="_blank" rel="noopener" title="Hubungi admin via WhatsApp">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true"><path d="M21 15a4 4 0 0 1-4 4H7l-4 4V5a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4v10Z" stroke-width="1.5"/></svg>
          <span class="hide-sm">Kontak</span>
        </a>
      </div>
    </header>

    <div class="toolbar" aria-label="Pencarian dan filter">
      <label class="search" aria-label="Cari aplikasi">
        üîé
        <input id="search" type="search" placeholder="Cari aplikasi‚Ä¶ (tekan /)" autocomplete="off" />
      </label>
      <div class="chips" role="group" aria-label="Kategori">
        <button class="chip" data-cat="all" aria-pressed="true">Semua</button>
        <button class="chip" data-cat="utama">Produk Utama</button>
        <button class="chip" data-cat="ppdb">PPDB</button>
        <button class="chip" data-cat="kelas">Kelas & Nilai</button>
        <button class="chip" data-cat="eks">Ekstrakurikuler</button>
        <button class="chip" data-cat="admin">Admin</button>
      </div>
    </div>

    <section class="section" id="pinned">
      <h2>Disematkan</h2>
      <div class="grid" data-grid="pinned">
        <div class="empty">Belum ada yang disematkan. Klik ikon ‚òÖ pada kartu untuk menyematkan.</div>
      </div>
    </section>

    <section class="section" id="recent">
      <h2>Terakhir Dibuka</h2>
      <div class="grid" data-grid="recent">
        <div class="empty">Belum ada riwayat. Aplikasi yang Anda klik akan muncul di sini.</div>
      </div>
    </section>

    <section class="section" id="apps">
      <h2>Semua Aplikasi</h2>
      <div class="grid" data-grid="all" role="list"></div>
    </section>

    <footer>
      <div>‚å®Ô∏è Tips: tekan <span class="kbd">/</span> untuk fokus ke pencarian ‚Ä¢ <span class="kbd">T</span> untuk ganti tema</div>
      <div id="whatsapp">Butuh bantuan? WA admin: <a href="https://wa.me/6285862982928" target="_blank" rel="noopener">085862982928</a></div>
    </footer>
  </div>

  <script>
    // ----- Data Aplikasi (EDIT SESUAI KEBUTUHAN) -----
    const APPS = [
      { id:'spmb-wawancara', name:'Wawancara SPMB', url:'https://spmbsmppgii1.netlify.app', desc:'Form & jadwal wawancara Penerimaan Siswa Baru.', icon:'users', tags:['utama','ppdb'] },
      { id:'tahfidz-tracker', name:'Tahfidz Tracker', url:'https://tahfidzpgii1.netlify.app', desc:'Setoran hafalan, penilaian, dan laporan kemajuan.', icon:'book', tags:['kelas'] },
      { id:'portal-ekskul', name:'EkskulHub', url:'https://ekskulhubpgii1.netlify.app', desc:'Presensi, nilai, dan jurnal kegiatan ekskul.', icon:'trophy', tags:['eks','admin'] },
      // --- Coming soon entries ---
      { id:'absen-sholat', name:'SholatPresence', url:'#', desc:'Pencatatan kehadiran sholat harian siswa. ', icon:'userCheck', tags:['ibadah'], soon:true },
      { id:'infaq-hub', name:'Amanah Infaq', url:'#', desc:'Input infaq sekolah dan leaderboard per kelas.', icon:'chart', tags:['keuangan','admin'], soon:true },
      { id:'prestasi-hub', name:'Galeri Prestasi', url:'#', desc:'Informasi prestasi siswa dan leaderboardnya.', icon:'trophy', tags:['prestasi'], soon:true }
    ];

    // ----- Util Storage -----
    const store = {
      get(k, def){ try { return JSON.parse(localStorage.getItem(k)) ?? def } catch { return def } },
      set(k, v){ localStorage.setItem(k, JSON.stringify(v)) }
    };

    // ----- Tema -----
    const THEME_KEY = 'schoolhub:theme';
    const themeBtn = document.getElementById('themeBtn');
    function setTheme(theme){
      document.documentElement.setAttribute('data-theme', theme);
      themeBtn.setAttribute('aria-pressed', theme === 'dark');
      store.set(THEME_KEY, theme);
      const meta = document.querySelector('meta[name="theme-color"]');
      if(meta){ meta.setAttribute('content', theme === 'dark' ? '#0b1020' : '#0ea5e9'); }
    }
    setTheme(store.get(THEME_KEY, window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'));
    themeBtn.addEventListener('click',()=>{
      const cur = document.documentElement.getAttribute('data-theme');
      setTheme(cur === 'light' ? 'dark' : 'light');
    });
    document.addEventListener('keydown', (e)=>{
      if(e.key.toLowerCase()==='t') themeBtn.click();
    });

    // ----- Ikon SVG (mirip shadcn/heroicons) -----
    function getIcon(name){
      const base = "width='22' height='22' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='1.6' stroke-linecap='round' stroke-linejoin='round' aria-hidden='true'";
      const map = {
        users: `<svg ${base}><path d='M16 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2'/><circle cx='9' cy='7' r='4'/><path d='M22 21v-2a4 4 0 0 0-3-3.87'/><path d='M16 3.13a4 4 0 0 1 0 7.75'/></svg>`,
        trophy: `<svg ${base}><path d='M8 21h8'/><path d='M12 17v4'/><path d='M7 4h10v4a5 5 0 0 1-10 0V4Z'/><path d='M18 8h1a3 3 0 0 0 3-3V4h-4'/><path d='M6 4H2v1a3 3 0 0 0 3 3h1'/></svg>`,
        book: `<svg ${base}><path d='M4 19.5A2.5 2.5 0 0 1 6.5 17H20'/><path d='M4 4v15.5A2.5 2.5 0 0 1 6.5 22H20V4a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2Z'/></svg>`,
        chart: `<svg ${base}><path d='M3 3v18h18'/><rect x='7' y='12' width='3' height='6'/><rect x='12' y='8' width='3' height='10'/><rect x='17' y='5' width='3' height='13'/></svg>`,
        layers: `<svg ${base}><path d='m12 2 8 4-8 4-8-4 8-4z'/><path d='m4 10 8 4 8-4'/><path d='m4 16 8 4 8-4'/></svg>`,
        mail: `<svg ${base}><path d='M4 4h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2Z'/><path d='m22 6-10 7L2 6'/></svg>`,
        library: `<svg ${base}><rect x='4' y='3' width='16' height='18' rx='2'/><path d='M9 3v18'/><path d='M15 3v18'/></svg>`,
        userCheck: `<svg ${base}><circle cx='9' cy='7' r='4'/><path d='M17 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2'/><path d='m16 11 2 2 4-4'/></svg>`
      };
      return map[name] || `<svg ${base}><circle cx='12' cy='12' r='9'/></svg>`;
    }

    // ----- Render Kartu -----
    const grids = {
      all: document.querySelector('[data-grid="all"]'),
      pinned: document.querySelector('[data-grid="pinned"]'),
      recent: document.querySelector('[data-grid="recent"]')
    };

    function cardTpl(app){
      const a = document.createElement('a');
      a.href = app.url;
      a.target = '_blank';
      a.rel = 'noopener noreferrer';
      a.role = 'listitem';
      a.className = 'card';
      a.dataset.tags = app.tags.join(',');
      a.dataset.id = app.id;
      const status = app.soon ? `<span class="status">Segera rilis</span>` : '';
      const favBtn = app.soon ? '' : `<button class="fav" title="Sematkan" aria-label="Sematkan ${app.name}" aria-pressed="false">‚òÖ</button>`;
      a.innerHTML = `
        <div class="icon" aria-hidden="true">${getIcon(app.icon)}</div>
        <div class="meta">
          <h3>${app.name}</h3>
          <div class="desc">${app.desc}${app.soon ? "<span style='margin-left:6px;font-size:11px;color:var(--muted)'>¬∑ coming soon</span>" : ''}</div>
          <div class="tags">${app.tags.map(t=>`<span class='tag'>#${t}</span>`).join('')}</div>
        </div>
        ${favBtn}
        ${status}
      `;
      // klik menyimpan recent
      if(!app.soon){
        a.addEventListener('click', ()=> addRecent(app.id));
      } else {
        a.removeAttribute('target');
        a.setAttribute('aria-disabled','true');
        a.addEventListener('click', (e)=> e.preventDefault());
      }
      // cegah klik saat tekan tombol fav
      const fav = a.querySelector('.fav');
      if(fav){
        fav.addEventListener('click', (ev)=>{
          ev.preventDefault(); ev.stopPropagation();
          togglePin(app.id, ev.currentTarget);
        });
      }
      return a;
    }

    function renderAll(){
      grids.all.innerHTML = '';
      APPS.forEach(app=> grids.all.appendChild(cardTpl(app)));
      applySearch();
      hydratePins();
    }

    // ----- Search & Filter -----
    const searchEl = document.getElementById('search');
    const chips = [...document.querySelectorAll('.chip')];
    let activeCat = 'all';

    function applySearch(){
      const q = searchEl.value.trim().toLowerCase();
      const cards = grids.all.querySelectorAll('.card');
      let visible = 0;
      cards.forEach(c =>{
        const text = c.textContent.toLowerCase();
        const tags = c.dataset.tags.split(',');
        const inCat = activeCat==='all' || tags.includes(activeCat);
        const show = inCat && (!q || text.includes(q));
        c.style.display = show ? '' : 'none';
        if(show) visible++;
      });
      if(!visible){
        const empty = document.createElement('div');
        empty.className='empty';
        empty.textContent='Tidak ditemukan. Coba kata kunci atau kategori lain.';
        grids.all.appendChild(empty);
      }
    }

    searchEl.addEventListener('input', applySearch);
    document.addEventListener('keydown', (e)=>{ if(e.key==='/'){ e.preventDefault(); searchEl.focus(); } });
    chips.forEach(ch => ch.addEventListener('click', ()=>{
      chips.forEach(x=>x.setAttribute('aria-pressed','false'));
      ch.setAttribute('aria-pressed','true');
      activeCat = ch.dataset.cat;
      applySearch();
    }));

    // ----- Pin / Pinned -----
    const PIN_KEY = 'schoolhub:pinned';
    function getPins(){ return new Set(store.get(PIN_KEY, [])); }
    function setPins(set){ store.set(PIN_KEY, [...set]); }

    function hydratePins(){
      const pins = getPins();
      // tombol
      document.querySelectorAll('.fav').forEach(btn=>{
        const id = btn.closest('.card').dataset.id;
        btn.setAttribute('aria-pressed', pins.has(id));
      });
      // grid pinned
      const box = grids.pinned; box.innerHTML = '';
      const list = APPS.filter(a=> pins.has(a.id));
      if(list.length===0){ box.innerHTML = '<div class="empty">Belum ada yang disematkan. Klik ikon ‚òÖ pada kartu untuk menyematkan.</div>'; return }
      list.forEach(app=> box.appendChild(cardTpl(app)));
    }

    function togglePin(id, btn){
      const pins = getPins();
      if(pins.has(id)) pins.delete(id); else pins.add(id);
      setPins(pins);
      if(btn) btn.setAttribute('aria-pressed', pins.has(id));
      hydratePins();
    }

    // ----- Recent -----
    const RECENT_KEY = 'schoolhub:recent';
    function addRecent(id){
      const rec = store.get(RECENT_KEY, []);
      const next = [id, ...rec.filter(x=>x!==id)].slice(0,6);
      store.set(RECENT_KEY, next);
      renderRecent();
    }
    function renderRecent(){
      const rec = store.get(RECENT_KEY, []);
      const box = grids.recent; box.innerHTML='';
      if(rec.length===0){ box.innerHTML = '<div class="empty">Belum ada riwayat. Aplikasi yang Anda klik akan muncul di sini.</div>'; return }
      rec.map(id=> APPS.find(a=>a.id===id)).filter(Boolean).forEach(app=> box.appendChild(cardTpl(app)));
    }

    // ----- Init -----
    renderAll();
    renderRecent();
  </script>
</body>
</html>
